### μ”κµ¬ μ‚¬ν•­

- Docker λ° Docker Compose

### μ‹¤ν–‰ μμ„

1.  **ν™κ²½ λ³€μ νμΌ μƒμ„±:**
    λ£¨νΈ ν΄λ”μ `.env.example` νμΌμ„ μ°Έκ³ ν•μ—¬ **`.env`** νμΌμ„ **μƒμ„±**ν•κ³ , `DB_USERNAME`, `JWT_SECRET` λ“± ν•„μ κ°’μ„ μ„¤μ •ν•©λ‹λ‹¤.

    ```bash
    cp .env.example .env
    ```

2.  **ν”„λ΅μ νΈ κµ¬λ™ (One-line):**
    DB μ»¨ν…μ΄λ„μ™€ Nest.js μ„λ²„ μ»¨ν…μ΄λ„λ¥Ό λΉλ“ν•κ³  κµ¬λ™ν•©λ‹λ‹¤.
    ```bash
    docker-compose up --build
    ```
    (μ„λ²„λ” `http://localhost:3000`μ—μ„ μ‹¤ν–‰λ©λ‹λ‹¤.)

## 3. π“ μƒμ„Έ API λ…μ„Έ λ° μ‚¬μ© μμ‹

λ¨λ“  APIλ” `http://localhost:3000`λ¥Ό κΈ°λ³Έ URLλ΅ μ‚¬μ©ν•©λ‹λ‹¤.

### `POST /api/users`

- **μ„¤λ…:** μƒλ΅μ΄ μ‚¬μ©μλ¥Ό μƒμ„±ν•©λ‹λ‹¤.
- **μΈμ¦:** λ¶ν•„μ”
- **Request Body:**
  ```json
  {
    "email": "tester@example.com",
    "name": "tester_name",
    "password": "password1234"
  }
  ```
- **Response (μ„±κ³µ μ‹):**
  ```json
  {
    "success": true,
    "statusCode": 201,
    "data": {
      "id": 2,
      "createdAt": "2025-11-07T17:53:58.476Z",
      "updatedAt": "2025-11-07T17:53:58.476Z",
      "email": "tester@example.com",
      "name": "teseter",
      "password": "$2b$10$XU65Ya/nSkaztW.St7tO/O2uP0JQ7aClkebmSEV.YtPXJnrAUa4HK",
      "points": 0
    },
    "error": null
  }
  ```

### `POST /api/auth/login`

- **μ„¤λ…:** μ΄λ©”μΌ/λΉ„λ°€λ²νΈλ΅ μΈμ¦ ν›„ Access/Refresh Tokenμ„ λ°κΈ‰ν•©λ‹λ‹¤.
- **μΈμ¦:** λ¶ν•„μ”
- **Request Body:**
  ```json
  {
    "email": "tester@example.com",
    "password": "password1234"
  }
  ```
- **Response (μ„±κ³µ μ‹):**
  ```json
  {
    "success": true,
    "statusCode": 201,
    "data": {
      "accessToken": "...",
      "refreshToken": "..."
    },
    "error": null
  }
  ```

### `POST /api/auth/token/refresh`

- **μ„¤λ…:** Refresh Tokenμ΄ μ ν¨ν•  κ²½μ° μƒ Access Tokenμ„ λ°κΈ‰ν•©λ‹λ‹¤.
- **μΈμ¦:** `Authorization: Bearer <RefreshToken>` (ν•„μ)
- **Response (μ„±κ³µ μ‹):**
  ```json
  {
    "success": true,
    "statusCode": 201,
    "data": {
      "accessToken": "..."
    },
    "error": null
  }
  ```

### `POST /api/earn`

- **μ„¤λ…:** μΈμ¦λ μ‚¬μ©μμ—κ² ν¬μΈνΈλ¥Ό μ λ¦½ν•©λ‹λ‹¤.
- **μΈμ¦:** `Authorization: Bearer <AccessToken>` (ν•„μ)
- **Request Body:**
  ```json
  {
    "points": 100,
    "reason": "μ‹ κ· κ°€μ… μ΄λ²¤νΈ"
  }
  ```
- **Response (μ„±κ³µ μ‹):**
  ```json
  {
    "success": true,
    "statusCode": 201,
    "data": {
      "id": 1,
      "email": "test00@example.com",
      "points": 2500
    },
    "error": null
  }
  ```

### `GET /api/balance`

- **μ„¤λ…:** μΈμ¦λ μ‚¬μ©μμ ν„μ¬ ν¬μΈνΈ μ”μ•΅μ„ μ΅°νν•©λ‹λ‹¤.
- **μΈμ¦:** `Authorization: Bearer <AccessToken>` (ν•„μ)
- **Response (μ„±κ³µ μ‹):**
  ```json
  {
    "success": true,
    "statusCode": 200,
    "data": {
      "id": 1,
      "points": 2500
    },
    "error": null
  }
  ```

### `GET /api/history`

- **μ„¤λ…:** μΈμ¦λ μ‚¬μ©μμ λ¨λ“  ν¬μΈνΈ λ³€κ²½ λ‚΄μ—­μ„ μµμ‹ μμΌλ΅ μ΅°νν•©λ‹λ‹¤.
- **μΈμ¦:** `Authorization: Bearer <AccessToken>` (ν•„μ)
- **Response (μ„±κ³µ μ‹):**
  ```json
  {
    "success": true,
    "statusCode": 200,
    "data": [
      {
        "id": 17,
        "createdAt": "2025-11-08T03:11:22.720Z",
        "updatedAt": "2025-11-08T03:11:22.720Z",
        "points": 200,
        "reason": "λ½‘κΈ° μ΄λ²¤νΈ"
      },
      {
        "id": 16,
        "createdAt": "2025-11-08T01:53:37.500Z",
        "updatedAt": "2025-11-08T01:53:37.500Z",
        "points": 200,
        "reason": "λ½‘κΈ° μ΄λ²¤νΈ"
      }
    ],
    "error": null
  }
  ```

# DB ν…μ΄λΈ” κµ¬μ΅° μ„ νƒ κ³Όμ •

## Aμ• β€” DB νΈλ¦¬κ±° κΈ°λ° λ΅κ·Έ μƒμ„±

μ²μ ν¬μΈνΈ μ λ¦½ μ„λΉ„μ¤λ¥Ό μ„¤κ³„ν•  λ•λ” `user` ν…μ΄λΈ”κ³Ό `point` ν…μ΄λΈ”μ„ λ¶„λ¦¬ν•κ³ , μ—¬κΈ°μ— λ³„λ„μ `point_log` ν…μ΄λΈ”μ„ λ‘λ” κµ¬μ΅°λ¥Ό κ³ λ ¤ν–μµλ‹λ‹¤. `point` ν…μ΄λΈ”μ—μ„ ν¬μΈνΈ μƒμ„± λλ” μ—…λ°μ΄νΈκ°€ λ°μƒν•  λ•λ§λ‹¤ DB νΈλ¦¬κ±°κ°€ μ‘λ™ν•μ—¬ μλ™μΌλ΅ `point_log` ν…μ΄λΈ”μ— λ΅κ·Έλ¥Ό μ¶”κ°€ν•λ” λ°©μ‹μ…λ‹λ‹¤.
```sql
points ν…μ΄λΈ” UPDATE β†’ νΈλ¦¬κ±° μ‘λ™ β†’ point_log ν…μ΄λΈ” INSERT
```

### μ¥μ κ³Ό ν•κ³„

μ΄ λ°©μ‹μ κ°€μ¥ ν° μ¥μ μ€ DB λ λ²¨μ—μ„ μ •ν•©μ„±μ„ λ³΄μ¥ν•  μ μλ‹¤λ” μ μ…λ‹λ‹¤. ν¬μΈνΈ μ—…λ°μ΄νΈμ™€ λ΅κ·Έ μƒμ„±μ΄ DB λ‚΄λ¶€μ—μ„ μλ™μΌλ΅ μ—°κ²°λκΈ° λ•λ¬Έμ—, μ• ν”λ¦¬μΌ€μ΄μ… μ½”λ“μ—μ„ μ‹¤μλ΅ λ΅κ·Έλ¥Ό λ„λ½ν•  κ°€λ¥μ„±μ΄ μ—†μµλ‹λ‹¤.

ν•μ§€λ§ νΈλ¦¬κ±° λ‚΄λ¶€μ—μ„λ” "μ™ μ—…λ°μ΄νΈκ°€ λ°μƒν–λ”μ§€"λΌλ” λΉ„μ¦λ‹μ¤ λ΅μ§μ λ§¥λ½μ„ μ• μ μ—†κΈ° λ•λ¬Έμ—, λ΅κ·Έμ— μ›μΈμ„ λ…ν™•ν λ‚¨κΈ°λ ¤λ©΄ μ¶”κ°€μ μΈ λ°μ΄ν„° μ „λ‹¬μ΄λ‚ μ»¬λΌ ν™•μ¥μ΄ ν•„μ”ν•©λ‹λ‹¤. κ²°κµ­ νΈλ¦¬κ±° λ΅μ§μ΄ λ³µμ΅ν•΄μ§€κ³ , λ””λ²„κΉ…μ΄λ‚ μ μ§€λ³΄μ μ‹ μ• ν”λ¦¬μΌ€μ΄μ… μ½”λ“μ™€ DB λ΅μ§μ„ λ™μ‹μ— μ¶”μ ν•΄μ•Ό ν•λ” μ–΄λ ¤μ›€μ΄ μƒκΉλ‹λ‹¤.

---

## Bμ• β€” νΈλμ­μ… κΈ°λ° μ• ν”λ¦¬μΌ€μ΄μ… λ΅μ§ μ²λ¦¬ β…

ν„μ¬ κµ¬ν„ν• λ°©μ‹μ€ νΈλ¦¬κ±°λ¥Ό μ κ±°ν•κ³ , μ• ν”λ¦¬μΌ€μ΄μ… λ λ²¨μ—μ„ νΈλμ­μ… λ‚΄μ—μ„ λ΅κ·Έλ¥Ό λ¨Όμ € μƒμ„±ν• ν›„ `user` ν…μ΄λΈ”μ ν¬μΈνΈλ¥Ό μ—…λ°μ΄νΈν•λ” κµ¬μ΅°μ…λ‹λ‹¤. ν•λ‚μ νΈλμ­μ… μ•μ—μ„ λ‹¤μ μμ„λ΅ μ²λ¦¬λ©λ‹λ‹¤:

### μ²λ¦¬ μμ„
1. `point_log` ν…μ΄λΈ”μ— μ λ¦½/μ°¨κ° λ‚΄μ—­ μ¶”κ°€
2. `user` ν…μ΄λΈ”μ ν¬μΈνΈ μ—…λ°μ΄νΈ

### μ„ νƒ μ΄μ 

μ΄ λ°©μ‹μ€ νΈλ¦¬κ±°λ³΄λ‹¤ λ…μ‹μ μ΄λ©°, λΉ„μ¦λ‹μ¤ λ΅μ§μ μ΄μ λ‚ μ„Έλ¶€ μ •λ³΄λ¥Ό μ• ν”λ¦¬μΌ€μ΄μ… λ λ²¨μ—μ„ λ…ν™•ν μ μ–΄ν•  μ μμµλ‹λ‹¤. μλ¥Ό λ“¤μ–΄ "μƒν’ κµ¬λ§¤λ΅ μΈν• ν¬μΈνΈ μ°¨κ°"μΈμ§€ "μ΄λ²¤νΈ μ°Έμ—¬λ΅ μΈν• ν¬μΈνΈ μ λ¦½"μΈμ§€λ¥Ό λ΅κ·Έμ— λ…ν™•ν κΈ°λ΅ν•  μ μκ³ , μ΄λ¬ν• λΉ„μ¦λ‹μ¤ λ§¥λ½μ„ μ• ν”λ¦¬μΌ€μ΄μ… μ½”λ“μ—μ„ μ§μ ‘ κ΄€λ¦¬ν•  μ μμµλ‹λ‹¤.

λν• ν…μ¤νΈλ‚ μ μ§€λ³΄μκ°€ μ©μ΄ν•λ©°, ν–¥ν›„ λ΅μ§ ν™•μ¥(μ: μ΄λ²¤νΈ λ°ν–‰, μ•λ¦Ό μ „μ†΅, μ™Έλ¶€ μ‹μ¤ν… μ—°λ™ λ“±)μ—λ„ μ μ—°ν•κ² λ€μ‘ν•  μ μμµλ‹λ‹¤. λ¨λ“  λ΅μ§μ΄ μ½”λ“λ΅ λ…μ‹λμ–΄ μμ–΄ νλ¦„μ„ μ¶”μ ν•κΈ° μ‰½κ³ , λ‹¨μ„ ν…μ¤νΈ μ‘μ„±λ„ κ°„νΈν•©λ‹λ‹¤.

---

**μµμΆ… μ„ νƒ: Bμ• (νΈλμ­μ… κΈ°λ° λ΅κ·Έ μƒμ„±)**

νΈλ¦¬κ±° κΈ°λ° λ°©μ‹μ€ DB λ λ²¨μ—μ„ μ •ν•©μ„±μ„ λ³΄μ¥ν•  μ μμ§€λ§, λΉ„μ¦λ‹μ¤ λ§¥λ½μ„ νμ•…ν•κΈ° μ–΄λ µκ³  μ μ§€λ³΄μκ°€ λ³µμ΅ν•΄μ§€λ” λ‹¨μ μ΄ μμµλ‹λ‹¤. λ°λ©΄ νΈλμ­μ… κΈ°λ° λ°©μ‹μ€ λ΅μ§μ΄ λ…μ‹μ μ΄λ©° ν™•μ¥μ„±κ³Ό ν…μ¤νΈ μ©μ΄μ„±μ΄ λ›°μ–΄λ‚ μ¥κΈ°μ μΈ μ μ§€λ³΄μ κ΄€μ μ—μ„ λ” μ λ¦¬ν•λ‹¤κ³  νλ‹¨ν•μ—¬ μµμΆ…μ μΌλ΅ μ„ νƒν–μµλ‹λ‹¤.

---

## μ¶”ν›„ κ°μ„  μ•„μ΄λ””μ–΄

### ν¬μΈνΈ ν…μ΄λΈ” λ¶„λ¦¬

ν„μ¬λ” `user` ν…μ΄λΈ” λ‚΄μ— `point` μ»¬λΌμ„ μ§μ ‘ λ‘κ³  ν¬μΈνΈλ¥Ό κ΄€λ¦¬ν•κ³  μμµλ‹λ‹¤. μ΄ κµ¬μ΅°λ” λ‹¨μν•κ³  λΉ λ¥΄κ² κµ¬ν„ν•  μ μλ‹¤λ” μ¥μ μ΄ μμ§€λ§, μ„λΉ„μ¤κ°€ ν™•μ¥λκ³  μ‚¬μ©μκ°€ λ§μ•„μ§ κ²½μ° λ‡ κ°€μ§€ λ¬Έμ κ°€ μμƒλ©λ‹λ‹¤.

#### μμƒλλ” λ¬Έμ μ 

**UPDATE νΈλν”½ μ§‘μ¤‘**: ν¬μΈνΈ μ λ¦½κ³Ό μ°¨κ° μ”μ²­μ΄ λ§μ•„μ§μλ΅ `user` ν…μ΄λΈ”μ— μ§‘μ¤‘μ μΈ UPDATE νΈλν”½μ΄ λ°μƒν•κ² λ©λ‹λ‹¤. νΉν μ΄λ²¤νΈλ‚ ν”„λ΅λ¨μ… κΈ°κ°„μ—λ” λ™μ‹λ‹¤λ°μ μΈ ν¬μΈνΈ μ—…λ°μ΄νΈλ΅ μΈν•΄ λ³‘λ© ν„μƒμ΄ λ°μƒν•  μ μμµλ‹λ‹¤.

**μ κΈ μ¶©λ κ°€λ¥μ„±**: λ΅κ·ΈμΈ, νμ›μ •λ³΄ μ΅°ν, ν”„λ΅ν•„ μμ • λ“± λ‹¤λ¥Έ μ£Όμ” κΈ°λ¥κ³Ό λ™μΌν• ν…μ΄λΈ”μ„ κ³µμ ν•κΈ° λ•λ¬Έμ—, ν¬μΈνΈ κ΄€λ ¨ νΈλμ­μ…μ΄ λ§μ„ κ²½μ° μ„±λ¥ μ €ν•κ°€ λ°μƒν•  μ μμµλ‹λ‹¤. μλ¥Ό λ“¤μ–΄ μ‚¬μ©μκ°€ ν¬μΈνΈλ¥Ό μ λ¦½λ°›λ” μ¤‘μ— ν”„λ΅ν•„ μ •λ³΄λ¥Ό μ΅°νν•λ ¤ ν•  λ• λ€κΈ° μ‹κ°„μ΄ κΈΈμ–΄μ§ μ μμµλ‹λ‹¤.

**ν™•μ¥μ„± μ μ•½**: ν–¥ν›„ ν¬μΈνΈ μ λ¦½ μ΄λ ¥ λ¶„μ„, μ΄λ²¤νΈλ³„ ν¬μΈνΈ κµ¬λ¶„, ν¬μΈνΈ λ§λ£ μ •μ±… λ“±μ κΈ°λ¥μ„ μ¶”κ°€ν•  λ• `user` ν…μ΄λΈ”μ— μ§€λ‚μΉκ² λ§μ€ μ±…μ„μ΄ μ§‘μ¤‘λμ–΄ κ΄€λ¦¬ λ³µμ΅λ„κ°€ μ¦κ°€ν•  μ μμµλ‹λ‹¤.

#### κ°μ„  λ°©μ•

ν–¥ν›„ νΈλν”½μ΄ μ¦κ°€ν•λ©΄ `user` ν…μ΄λΈ”κ³Ό `point` ν…μ΄λΈ”μ„ λ¶„λ¦¬ν•μ—¬, ν¬μΈνΈ κ΄€λ ¨ λ΅μ§μ΄ `user` ν…μ΄λΈ”μ„ μ§μ ‘ μ΅°νν•κ±°λ‚ μμ •ν•μ§€ μ•λ„λ΅ κµ¬μ΅°λ¥Ό κ°μ„ ν•  μ μμµλ‹λ‹¤. μ΄λ¥Ό ν†µν•΄ κ° λ„λ©”μΈμ λ…λ¦½μ„±μ„ λ†’μ΄κ³  μ„±λ¥ λ³‘λ©μ„ λ¶„μ‚°μ‹ν‚¬ μ μμΌλ©°, ν¬μΈνΈ λ„λ©”μΈμ— νΉν™”λ μΈλ±μ¤λ‚ νν‹°μ…”λ‹ μ „λµμ„ λ³„λ„λ΅ μ μ©ν•  μ μκ² λ©λ‹λ‹¤.